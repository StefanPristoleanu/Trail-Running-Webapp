(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,a){"use strict";(function(e){var n=a(10),r=a.n(n),l=a(25),i=a(16),s=a(17),o=a(21),c=a(20),u=a(4),d=a(22),p=a(0),m=a.n(p),h=a(45),g=(a(57),a(47)),f=a(34),v=a(35),y=a(44),E=a(235),k=a(13),b=a.n(k),w=a(9),T=a(14),S=a(36),O=function(t){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(c.a)(a).call(this,e))).state={lat:45,lng:0,trails:[]},t.getAllTrails=t.getAllTrails.bind(Object(u.a)(t)),t.loadTrails=t.loadTrails.bind(Object(u.a)(t)),t.onMapReady=t.onMapReady.bind(Object(u.a)(t)),t.onOverlayClick=t.onOverlayClick.bind(Object(u.a)(t)),t}return Object(d.a)(a,t),Object(s.a)(a,[{key:"getAllTrails",value:function(){var e=Object(l.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,b.a.get(T.c+"trail/find-all").then(function(e){e.data.responseCode<0?t.setState({errorMessage:e.data.message}):t.loadTrails(t,e)}).catch(function(e){console.log(e)});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){e.trailId=new URLSearchParams(window.location.search).get("trailId"),console.log("global.trailId: "+e.trailId),w.a.isLogged&&void 0!==e.trailId&&null!==e.trailId&&this.props.history.push("/trail-details/"+e.trailId),this.getAllTrails()}},{key:"loadTrails",value:function(e,t){var a=window.google,n={url:"http://maps.google.com/mapfiles/kml/paddle/go.png",scaledSize:new a.maps.Size(40,40)},r={url:"http://maps.google.com/mapfiles/kml/paddle/red-circle.png",scaledSize:new a.maps.Size(40,40)},l=[],i=[],s="",o="",c="",u="",d="",p=w.a.getAppData();p.allTrails=t.data,w.a.setAppData(p);for(var m=0;m<t.data.length;m++)l=t.data[m].coordinates,s=t.data[m].trailName,c=t.data[m].trailLength,o=t.data[m].trailDifficulty,u=t.data[m].trailType,d=t.data[m].trailId,i.push(new a.maps.Polyline({path:l,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:5})),i.push(new a.maps.Marker({position:l[0],title:"Start Trail, "+s+", "+o+", "+c+", "+u+", "+d,icon:n})),i.push(new a.maps.Marker({position:l[l.length-1],title:"End Trail, "+s+", "+o+", "+c+", "+u+", "+d,icon:r}));e.setState({trails:i})}},{key:"onMapReady",value:function(e){console.log("pass through MapReady")}},{key:"test",value:function(){console.log("test")}},{key:"onOverlayClick",value:function(e){var t=window.google;if(void 0!==e.overlay.getTitle){var a=e.overlay.getTitle().split(","),n=a[5].trim();console.log("#trailId: #"+n+"#"),this.infoWindow=this.infoWindow||new t.maps.InfoWindow,this.infoWindow.setContent("<div><h5>"+a[1]+"</h5><h6> Location: "+a[0]+"</h6><h6> Difficulty: "+a[2]+"</h6><h6> Length: "+a[3]+" m</h6><h6> Type: "+a[4]+'</h6><button onClick={this.test}><a href="./?trailId='+n+'">View Trail</a></button></div>'),this.infoWindow.open(e.map,e.overlay),e.map.setCenter(e.overlay.getPosition())}}},{key:"findCurrentLocation",value:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){this.setState({lat:e.coords.latitude,lng:e.coords.longitude})}):console.log("Browser doesn't support Geolocation")}},{key:"render",value:function(){console.log("trails length: "+this.state.trails.length);window.google;return m.a.createElement("div",null,m.a.createElement(y.a,null,m.a.createElement(f.a,null)),m.a.createElement("div",null,m.a.createElement(E.a,null,m.a.createElement("h2",null,"Hello, running enthusiast!"),m.a.createElement("div",null,"Here you can view all of the existing trails on the website.",m.a.createElement("br",null),"Login for more features."),m.a.createElement("div",null,m.a.createElement(g.a,null)))),m.a.createElement("div",null,m.a.createElement(S.GMap,{overlays:this.state.trails,options:{center:{lat:53.467458,lng:-2.234257},zoom:15},style:{width:"100%",minHeight:"320px",height:"700px"},onOverlayClick:this.onOverlayClick})),m.a.createElement(v.a,null))}}]),a}(p.Component);t.a=Object(h.a)(O)}).call(this,a(41))},118:function(e,t,a){"use strict";(function(e){var n=a(10),r=a.n(n),l=a(25),i=a(16),s=a(17),o=a(21),c=a(20),u=a(4),d=a(22),p=a(0),m=a.n(p),h=a(45),g=a(49),f=a(44),v=a(29),y=a(23),E=a(71),k=a(34),b=a(35),w=a(13),T=a.n(w),S=a(14),O=a(9),C=a(36),L=(a(216),a(223),a(59)),D=function(t){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(c.a)(a).call(this,e))).state={errorMessage:"",trails:[],constructedTrail:[],isEditMode:!1,isSnapToRoad:!1},t.requestGetUserData=t.requestGetUserData.bind(Object(u.a)(t)),t.onMapClick=t.onMapClick.bind(Object(u.a)(t)),t.loadTrails=t.loadTrails.bind(Object(u.a)(t)),t.clearTrails=t.clearTrails.bind(Object(u.a)(t)),t.addTrails=t.addTrails.bind(Object(u.a)(t)),t.onOverlayClick=t.onOverlayClick.bind(Object(u.a)(t)),t.goToRecordTrail=t.goToRecordTrail.bind(Object(u.a)(t)),t}return Object(d.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){e.newTrail=[],this.getAllTrails(),O.a.isLogged?(this.requestGetUserData(),e.isSnapToRoad=!1):this.props.history.push("/")}},{key:"getAllTrails",value:function(){var t=Object(l.a)(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=this,e.allTrailsResponse={},T.a.get(S.c+"trail/find-all").then(function(t){console.log("API server response: "+JSON.stringify(t.data)),t.data.responseCode<0?a.setState({errorMessage:t.data.message}):(e.allTrailsResponse=t,a.loadTrails(a,t))}).catch(function(e){console.log(e)});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"requestGetUserData",value:function(){var e=this;T.a.get(S.c+"user/details").then(function(t){console.log("API server response: "+JSON.stringify(t.data)),t.data.responseCode<0?e.setState({errorMessage:t.data.message}):(O.a.setUserData(t.data),e.setState({userData:t.data}))}).catch(function(e){console.log(e)})}},{key:"loadTrails",value:function(t,a){this.setState({trails:[]});for(var n=window.google,r={url:"http://maps.google.com/mapfiles/kml/paddle/go.png",scaledSize:new n.maps.Size(40,40)},l={url:"http://maps.google.com/mapfiles/kml/paddle/red-circle.png",scaledSize:new n.maps.Size(40,40)},i=[],s="",o="",c="",u="",d="",p=[],m=0;m<a.data.length;m++){i=a.data[m].coordinates,s=a.data[m].trailName,c=a.data[m].trailLength,o=a.data[m].trailDifficulty,u=a.data[m].trailType,d=a.data[m].trailId,p.push(new n.maps.Polyline({path:i,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:5}));var h=new n.maps.Marker({position:i[0],title:"Start Trail, "+s+", "+o+", "+c+", "+u+", "+d,icon:r});p.push(h);var g=new n.maps.Marker({position:i[i.length-1],title:"End Trail, "+s+", "+o+", "+c+", "+u+", "+d,icon:l});p.push(g)}var f={url:"http://maps.google.com/mapfiles/kml/paddle/blu-circle.png",scaledSize:new n.maps.Size(40,40)},v=new n.maps.Marker({position:{lat:e.gpsLatitude,lng:e.gpsLongitude},title:"Current Position",icon:f,animation:n.maps.Animation.DROP});p.push(v),t.setState({trails:p})}},{key:"onMapClick",value:function(t){if(this.state.isEditMode){var a=this.state.trails;this.setState({trails:[]});var n=window.google,r={url:"http://maps.google.com/mapfiles/kml/paddle/ylw-circle.png",scaledSize:new n.maps.Size(40,40)},l=JSON.parse(JSON.stringify(t)),i={lat:l.latLng.lat,lng:l.latLng.lng};e.newTrail.push(i),console.log("elem: "+a.length+" coord: "+l.latLng.lat+" "+l.latLng.lng+"   "+JSON.stringify(i));var s=new n.maps.Marker({position:i,title:"Custom Marker",icon:r,animation:n.maps.Animation.DROP});a.push(s);a.push(new n.maps.Polyline({path:e.newTrail,geodesic:!0,strokeColor:"#0000FF",strokeOpacity:0,icons:[{icon:{path:"M 0,-1 0,1",strokeOpacity:1,scale:4},offset:"0",repeat:"20px"}]})),this.setState({trails:a})}}},{key:"onOverlayClick",value:function(e){""!=this.state.errorMessage&&(this.state.errorMessage="");var t=window.google;if(void 0!==e.overlay.getTitle){var a=e.overlay.getTitle().split(","),n=a[5].trim();console.log("#trailId: #"+n+"#"),this.infoWindow=this.infoWindow||new t.maps.InfoWindow,this.infoWindow.setContent("<div><h5>"+a[1]+"</h5><h6> Location: "+a[0]+"</h6><h6> Difficulty: "+a[2]+"</h6><h6> Length: "+a[3]+" m</h6><h6> Type: "+a[4]+'</h6><button onClick={this.test}><a href="./?trailId='+n+'">View Trail</a></button></div>'),this.infoWindow.open(e.map,e.overlay),e.map.setCenter(e.overlay.getPosition())}}},{key:"clearTrails",value:function(){e.newTrail=[],this.loadTrails(this,e.allTrailsResponse)}},{key:"addTrails",value:function(t){if(console.log("json: "+t),void 0!==e.newTrail)if(e.newTrail.length<2)this.state.errorMessage="Please activate Edit Mode and construct a trail.";else{console.log("newtrail length: "+e.newTrail.length);var a=this;T.a.post(S.c+"trail/add",t).then(function(e){console.log("API server response: "+JSON.stringify(e.data)),e.data.responseCode<0?a.setState({errorMessage:e.data.message}):(console.log("//todo"),a.setState({trails:[]}),a.getAllTrails(),a.setState({isEditMode:!1}))}).catch(function(e){console.log(e)})}}},{key:"goToRecordTrail",value:function(){this.props.history.push("/recording")}},{key:"render",value:function(){var t=this,a=m.a.createElement("span",null);""!==this.state.errorMessage&&(a=m.a.createElement(g.a,{bsStyle:"warning"},m.a.createElement("strong",null,this.state.errorMessage)));window.google;var n={};return n=void 0!==e.gpsLatitude?{center:{lat:e.gpsLatitude,lng:e.gpsLongitude},zoom:15}:{center:{lat:53.467458,lng:-2.234257},zoom:15},e.isSnapToRoad=this.state.isSnapToRoad,m.a.createElement("div",null,m.a.createElement(f.a,null,m.a.createElement(k.a,null)),m.a.createElement("h3",null," User Home Page "),m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(v.a,{style:{width:"400px",display:"inline-block"}},m.a.createElement(v.a.Heading,null,a),m.a.createElement(v.a.Body,null,m.a.createElement(f.a,null,m.a.createElement(E.a,{callbackFunctionAddTrails:this.addTrails,callbackFunctionClearTrails:this.clearTrails}),m.a.createElement(y.a,{bsStyle:"success",onClick:this.goToRecordTrail},"Record Trail"),m.a.createElement(L.ToggleButton,{style:{width:"150px"},onLabel:"Edit Mode",offLabel:"View Mode",onIcon:"pi pi-check",offIcon:"pi pi-times",checked:this.state.isEditMode,onChange:function(e){return t.setState({isEditMode:e.value})}}),m.a.createElement(L.ToggleButton,{style:{width:"150px"},onLabel:"Snap-To-Road",offLabel:"Off-road",onIcon:"pi pi-check",offIcon:"pi pi-times",checked:this.state.isSnapToRoad,onChange:function(e){return t.setState({isSnapToRoad:e.value})}}))))),m.a.createElement("div",{id:"map"},m.a.createElement(C.GMap,{id:"map",overlays:this.state.trails,options:n,style:{width:"100%",minHeight:"320px",height:"700px"},onMapClick:this.onMapClick,onOverlayClick:this.onOverlayClick})),m.a.createElement(b.a,null))}}]),a}(p.Component);t.a=Object(h.a)(D)}).call(this,a(41))},120:function(e,t,a){"use strict";(function(e){var n=a(10),r=a.n(n),l=a(25),i=a(16),s=a(17),o=a(21),c=a(20),u=a(4),d=a(22),p=a(0),m=a.n(p),h=a(45),g=a(49),f=a(23),v=a(44),y=a(29),E=a(53),k=a(12),b=a(5),w=a(15),T=a(18),S=a(34),O=a(35),C=a(13),L=a.n(C),D=a(14),M=a(9),j=a(31),I=a(36),A=function(t){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(c.a)(a).call(this,e))).state={errorMessage:"",userData:{},username:"",nickname:"",registeredAt:"",lastLoginAt:"",trails:[],constructedTrail:[],totalUserLikes:0,likedTrails:[]},t.requestGetUserData=t.requestGetUserData.bind(Object(u.a)(t)),t.getMyTrails=t.getMyTrails.bind(Object(u.a)(t)),t.loadTrails=t.loadTrails.bind(Object(u.a)(t)),t.clearTrails=t.clearTrails.bind(Object(u.a)(t)),t.onOverlayClick=t.onOverlayClick.bind(Object(u.a)(t)),t.updateUser=t.updateUser.bind(Object(u.a)(t)),t}return Object(d.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){M.a.isLogged?this.requestGetUserData():this.props.history.push("/")}},{key:"updateUser",value:function(){if(""!==this.state.username.trim()&&j.d(this.state.username))if(""!==this.state.nickname.trim()){var e={userId:M.a.getUserData().userId,nickname:this.state.nickname,username:this.state.username},t=this;L.a.post(D.c+"user/update",e).then(function(e){console.log("API server response: "+JSON.stringify(e.data)),e.data.responseCode<0?t.setState({errorMessage:e.data.message}):t.setState({errorMessage:"Details successfully updated!"})}).catch(function(e){console.log(e)})}else this.setState({errorMessage:"Nickname is required!"});else this.setState({errorMessage:"Email format is required!"})}},{key:"requestGetUserData",value:function(){var e=this;L.a.get(D.c+"user/details").then(function(t){if(console.log("API server response: "+JSON.stringify(t.data)),t.data.responseCode<0)e.setState({errorMessage:t.data.message});else{M.a.setUserData(t.data),e.setState({userData:t.data}),e.setState({username:t.data.username}),e.setState({nickname:t.data.nickname});var a=t.data.registeredAt.split(" ");e.setState({registeredAt:a[0]}),e.setState({lastLoginAt:t.data.lastLoginAt}),e.setState({likedTrails:t.data.likedTrails}),console.log("likedTrails: ",t.data.likedTrails),e.getMyTrails()}}).catch(function(e){console.log(e)})}},{key:"getMyTrails",value:function(){var t=Object(l.a)(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=this,e.allTrailsResponse={},L.a.get(D.c+"trail/user-trails?userId="+M.a.getUserData().userId).then(function(t){console.log("API server response getMyTrails: "+JSON.stringify(t.data)),t.data.responseCode<0?a.setState({errorMessage:t.data.message}):(e.allTrailsResponse=t,a.loadTrails(a,t))}).catch(function(e){console.log(e)});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"loadTrails",value:function(e,t){console.log("loadTrails "+JSON.stringify(t)),this.setState({trails:[]});for(var a=window.google,n={url:"http://maps.google.com/mapfiles/kml/paddle/go.png",scaledSize:new a.maps.Size(40,40)},r={url:"http://maps.google.com/mapfiles/kml/paddle/red-circle.png",scaledSize:new a.maps.Size(40,40)},l=[],i="",s="",o="",c="",u=0,d="",p=[],m=0;m<t.data.length;m++){l=t.data[m].coordinates,i=t.data[m].trailName,o=t.data[m].trailLength,s=t.data[m].trailDifficulty,c=t.data[m].trailType,d=t.data[m].trailId,u=e.state.totalUserLikes,u+=t.data[m].trailNoOfLikes,e.setState({totalUserLikes:u}),p.push(new a.maps.Polyline({path:l,geodesic:!0,strokeColor:"#0000FF",strokeOpacity:.5,strokeWeight:5}));var h=new a.maps.Marker({position:l[0],title:"Start Trail, "+i+", "+s+", "+o+", "+c+", "+d,icon:n});p.push(h);var g=new a.maps.Marker({position:l[l.length-1],title:"End Trail, "+i+", "+s+", "+o+", "+c+", "+d,icon:r});p.push(g)}e.setState({trails:p})}},{key:"onOverlayClick",value:function(e){var t=window.google;if(void 0!==e.overlay.getTitle){var a=e.overlay.getTitle().split(","),n=a[5].trim();console.log("#trailId: #"+n+"#"),this.infoWindow=this.infoWindow||new t.maps.InfoWindow,this.infoWindow.setContent("<div><h5>"+a[1]+"</h5><h6> Location: "+a[0]+"</h6><h6> Difficulty: "+a[2]+"</h6><h6> Length: "+a[3]+" m</h6><h6> Type: "+a[4]+'</h6><button onClick={this.test}><a href="./?trailId='+n+'">View Trail</a></button></div>'),this.infoWindow.open(e.map,e.overlay),e.map.setCenter(e.overlay.getPosition())}}},{key:"clearTrails",value:function(){e.newTrail=[],this.loadTrails(this,e.allTrailsResponse)}},{key:"render",value:function(){var e=this,t=m.a.createElement("span",null);""!==this.state.errorMessage&&(t=m.a.createElement(g.a,{bsStyle:"warning"},m.a.createElement("strong",null,this.state.errorMessage)));window.google;var a=m.a.createElement("span",null);a=m.a.createElement(f.a,{bsStyle:"success",type:"button",onClick:this.updateUser},"Update");for(var n=[],r=M.a.getAppData(),l=0;l<this.state.likedTrails.length;l++)for(var i="./?trailId="+this.state.likedTrails[l],s=0;s<r.allTrails.length;s++)r.allTrails[s].trailId===this.state.likedTrails[l]&&n.push(m.a.createElement("a",{href:i},r.allTrails[s].trailName," | "));return m.a.createElement("div",null,m.a.createElement(v.a,null,m.a.createElement(S.a,null)),m.a.createElement("h3",null," User ",this.state.nickname,"'s Details Page "),m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(y.a,{style:{width:"400px",display:"inline-block"}},m.a.createElement(y.a.Heading,null,t),m.a.createElement(y.a.Body,null,m.a.createElement(E.a,{horizontal:!0},m.a.createElement(k.a,{controlId:"formHorizontalUserName"},m.a.createElement(b.a,{componentClass:w.a,sm:4},"Username:"),m.a.createElement(b.a,{sm:7},m.a.createElement(T.a,{type:"email",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}}))),m.a.createElement(k.a,{controlId:"formHorizontalNickname"},m.a.createElement(b.a,{componentClass:w.a,sm:4},"Nickname:"),m.a.createElement(b.a,{sm:7},m.a.createElement(T.a,{type:"text",value:this.state.nickname,onChange:function(t){return e.setState({nickname:t.target.value})}}))),m.a.createElement(k.a,{controlId:"formHorizontalRegisteredDate"},m.a.createElement(b.a,{componentClass:w.a,sm:4},"Registered On:"),m.a.createElement(b.a,{sm:7},m.a.createElement(T.a,{type:"date",value:this.state.registeredAt,disabled:!0,onChange:function(t){return e.setState({registeredAt:t.target.value})}}))),m.a.createElement(k.a,{controlId:"formHorizontalTotalLikes"},m.a.createElement(b.a,{componentClass:w.a,sm:4},"Total trail likes received:"),m.a.createElement(b.a,{sm:7},m.a.createElement(T.a,{type:"number",value:this.state.totalUserLikes,disabled:!0,onChange:function(t){return e.setState({registeredAt:t.target.value})}}))),m.a.createElement(k.a,{controlId:"formHorizontalTrailsLiked"},m.a.createElement(b.a,{componentClass:w.a,sm:4},"Liked trails:"),m.a.createElement(b.a,{sm:7},m.a.createElement("span",null,n))),m.a.createElement(k.a,null,m.a.createElement(b.a,{sm:10},a)))))),m.a.createElement("hr",null),m.a.createElement("h3",null," ",this.state.nickname,"'s own trails: "),m.a.createElement("div",{id:"map"},m.a.createElement(I.GMap,{id:"map",overlays:this.state.trails,options:{center:{lat:53.467458,lng:-2.234257},zoom:15},style:{width:"100%",minHeight:"320px",height:"700px"},onMapClick:this.onMapClick,onOverlayClick:this.onOverlayClick})),m.a.createElement(O.a,null))}}]),a}(p.Component);t.a=Object(h.a)(A)}).call(this,a(41))},121:function(e,t,a){"use strict";(function(e){var n=a(10),r=a.n(n),l=a(25),i=a(16),s=a(17),o=a(21),c=a(20),u=a(4),d=a(22),p=a(0),m=a.n(p),h=a(45),g=(a(57),a(47),a(34)),f=a(35),v=a(49),y=a(23),E=a(44),k=a(29),b=a(53),w=a(12),T=a(5),S=a(15),O=a(18),C=a(26),L=a(13),D=a.n(L),M=a(14),j=a(9),I=a(36),A=function(t){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(c.a)(a).call(this,e))).state={errorMessage:"",lat:45,lng:0,trails:[],trailId:0,trailName:"",trailDifficulty:"",trailLength:0,trailType:"",trailDescription:"",trailLikes:0,trailCreatedAt:"",trailCreatedBy:0,trailIncidents:0,deltaElevation:0,trailSlope:0,ownerOfTrail:!1,showPopup:!1,center:{lat:53.467458,lng:-2.234257},likedTrails:[]},t.getTrailDetails=t.getTrailDetails.bind(Object(u.a)(t)),t.displayTrail=t.displayTrail.bind(Object(u.a)(t)),t.requestGetUserData=t.requestGetUserData.bind(Object(u.a)(t)),t.generateActions=t.generateActions.bind(Object(u.a)(t)),t.openPopup=t.openPopup.bind(Object(u.a)(t)),t.closePopup=t.closePopup.bind(Object(u.a)(t)),t.deleteTrail=t.deleteTrail.bind(Object(u.a)(t)),t.updateTrail=t.updateTrail.bind(Object(u.a)(t)),t.updateTrail=t.updateTrail.bind(Object(u.a)(t)),t.likeTrail=t.likeTrail.bind(Object(u.a)(t)),t.goToUser=t.goToUser.bind(Object(u.a)(t)),t}return Object(d.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){e.trailId=this.props.match.params.id,j.a.isLogged?this.getTrailDetails():this.props.history.push("/")}},{key:"openPopup",value:function(){this.setState({showPopup:!0})}},{key:"closePopup",value:function(){this.setState({showPopup:!1})}},{key:"getTrailDetails",value:function(){var e=this;D.a.get(M.c+"trail/trail-details?trailId="+this.props.match.params.id).then(function(t){console.log("API server response: "+JSON.stringify(t.data)),t.data.responseCode<0?e.setState({errorMessage:t.data.message}):(console.log("Trail details: "+t),e.displayTrail(e,t),e.generateActions())}).catch(function(e){console.log(e)})}},{key:"generateActions",value:function(){var e=Object(l.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestGetUserData();case 2:j.a.getUserData().userId===this.state.trailCreatedBy&&this.setState({ownerOfTrail:!0}),console.log("userID: "+j.a.getUserData().userId+" ? "+this.state.trailCreatedBy);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"displayTrail",value:function(e,t){console.log("displayTrail "+JSON.stringify(t)),this.setState({trails:[]});var a,n,r,l,i,s,o=window.google,c={url:"http://maps.google.com/mapfiles/kml/paddle/go.png",scaledSize:new o.maps.Size(40,40)},u={url:"http://maps.google.com/mapfiles/kml/paddle/red-circle.png",scaledSize:new o.maps.Size(40,40)},d=[];a=t.data.coordinates,console.log("\n coord: "+a),n=t.data.trailName,l=t.data.trailLength,r=t.data.trailDifficulty,i=t.data.trailType,s=t.data.trailId;var p=j.a.getAppData();p.trailUserId=t.data.trailCreatedBy,p.trailUserNickname=t.data.nickname,j.a.setAppData(p),this.setState({trailName:n,trailCreatedBy:t.data.trailCreatedBy,trailLength:l,trailDifficulty:"",trailType:i,trailDescription:t.data.trailDescription,trailLikes:t.data.trailNoOfLikes,trailCreatedAt:t.data.trailCreatedAt,trailIncidents:t.data.trailIncidents,deltaElevation:t.data.deltaElevation,trailSlope:t.data.trailSlope}),d.push(new o.maps.Polyline({path:a,geodesic:!0,strokeColor:"#0000FF",strokeOpacity:.5,strokeWeight:5}));var m=new o.maps.Marker({position:a[0],title:"Start Trail, "+n+", "+r+", "+l+", "+i+", "+s,icon:c});d.push(m);var h=new o.maps.Marker({position:a[a.length-1],title:"End Trail, "+n+", "+r+", "+l+", "+i+", "+s,icon:u});d.push(h);var g=new o.maps.LatLng(a[0].lat,a[0].lng);this.gmap.getMap().panTo(g);var f={lat:a[0].lat,lng:a[0].lng};e.setState({trails:d,center:f}),console.log("Final trails len: "+d.length)}},{key:"deleteTrail",value:function(){var t=Object(l.a)(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=this,n={trailId:e.trailId},D.a.post(M.c+"trail/delete",n).then(function(e){console.log("API server response: "+JSON.stringify(e.data)),e.data.responseCode<0?a.setState({errorMessage:e.data.message}):(a.setState({showPopup:!1}),a.props.history.push("/user-details"))}).catch(function(e){console.log(e)});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"updateTrail",value:function(){if(""!==this.state.trailName.trim()){var t={trailId:e.trailId,trailName:this.state.trailName,trailDifficulty:1,trailType:this.state.trailType,trailDescription:this.state.trailDescription,trailLikes:this.state.trailLikes},a=this;D.a.post(M.c+"trail/update",t).then(function(e){console.log("API server response: "+JSON.stringify(e.data)),e.data.responseCode<0?a.setState({errorMessage:e.data.message}):a.setState({errorMessage:"Successfully updated trail!"})}).catch(function(e){console.log(e)})}else this.setState({errorMessage:"A trail name is required!"})}},{key:"requestGetUserData",value:function(){var e=this;D.a.get(M.c+"user/details").then(function(t){console.log("API server response: "+JSON.stringify(t.data)),t.data.responseCode<0?e.setState({errorMessage:t.data.message}):(j.a.setUserData(t.data),e.setState({likedTrails:t.data.likedTrails}),console.log("likedTrails: "+e.state.likedTrails))}).catch(function(e){console.log(e)})}},{key:"likeTrail",value:function(){if(this.state.likedTrails.includes(Number(e.trailId)))this.setState({errorMessage:"You have already liked this trail!"});else{var t=this,a={trailId:e.trailId};D.a.post(M.c+"trail/like",a).then(function(e){if(console.log("API server response: "+JSON.stringify(e.data)),e.data.responseCode<0)t.setState({errorMessage:e.data.message});else{var a=t.state.trailLikes+1;t.setState({errorMessage:"Like Success",trailLikes:a})}}).catch(function(e){console.log(e)})}}},{key:"onOverlayClick",value:function(e){var t=window.google;if(void 0!==e.overlay.getTitle){var a=e.overlay.getTitle().split(","),n=a[5].trim();console.log("#trailId: #"+n+"#"),this.infoWindow=this.infoWindow||new t.maps.InfoWindow,this.infoWindow.setContent("<div><h5>"+a[1]+"</h5><h6> Location: "+a[0]+"</h6><h6> Difficulty: "+a[2]+"</h6><h6> Length: "+a[3]+" m</h6><h6> Type: "+a[4]+'</h6><button onClick={this.test}><a href="./trail-details/'+n+'">View Trail</a></button></div>'),this.infoWindow.open(e.map,e.overlay),e.map.setCenter(e.overlay.getPosition())}}},{key:"goToUser",value:function(){this.props.history.push("/view-user")}},{key:"render",value:function(){var e=this,t=m.a.createElement("span",null);""!==this.state.errorMessage&&(t=m.a.createElement(v.a,{bsStyle:"warning"},m.a.createElement("strong",null,this.state.errorMessage)));window.google;var a={center:this.state.center,zoom:15},n=m.a.createElement("span",null),r=m.a.createElement("span",null),l=m.a.createElement("span",null),i="";return this.state.ownerOfTrail&&(n=m.a.createElement(y.a,{bsStyle:"danger",onClick:this.openPopup,style:{width:"93px"}}," Delete Trail "),r=m.a.createElement(y.a,{bsStyle:"success",type:"button",onClick:this.updateTrail,style:{width:"93px"}},"Update")),l=m.a.createElement(y.a,{bsStyle:"success",onClick:function(){return e.likeTrail()},style:{width:"93px"}}," Like Trail "),i=this.state.trailSlope>0?"Uphill":"Downhill",m.a.createElement("div",null,m.a.createElement(E.a,null,m.a.createElement(g.a,null)),m.a.createElement("div",null,m.a.createElement("div",null,m.a.createElement("h2",null,"Trail - ",this.state.trailName," Details "),m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(k.a,{style:{width:"400px",display:"inline-block"}},m.a.createElement(k.a.Heading,null,t),m.a.createElement(k.a.Body,null,m.a.createElement(b.a,{horizontal:!0},m.a.createElement(w.a,{controlId:"formHorizontalTrailName"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Trail Name:"),m.a.createElement(T.a,{sm:7},m.a.createElement(O.a,{type:"text",value:this.state.trailName,disabled:!this.state.ownerOfTrail,onChange:function(t){return e.setState({trailName:t.target.value})}}))),m.a.createElement(w.a,{controlId:"formHorizontalTrailDifficulty"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Difficulty:"),m.a.createElement(T.a,{sm:7},m.a.createElement(O.a,{componentClass:"select",disabled:!this.state.ownerOfTrail,value:this.state.trailDifficulty,onChange:function(t){return e.setState({trailDifficulty:t.target.value})}},m.a.createElement("option",{value:"1"},"Easy"),m.a.createElement("option",{value:"2"},"Moderate"),m.a.createElement("option",{value:"3"},"Difficult")))),m.a.createElement(w.a,{controlId:"formHorizontalTrailLength"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Computed Trail Length:"),m.a.createElement(T.a,{sm:7},m.a.createElement("b",null,this.state.trailLength," meters"))),m.a.createElement(w.a,{controlId:"formHorizontalTrailType"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Trail Type:"),m.a.createElement(T.a,{sm:7},m.a.createElement(O.a,{componentClass:"select",disabled:!this.state.ownerOfTrail,value:this.state.trailType,onChange:function(t){return e.setState({trailType:t.target.value})}},m.a.createElement("option",{value:"walking"},"Walking"),m.a.createElement("option",{value:"running"},"Running"),m.a.createElement("option",{value:"cycling"},"Cycling")))),m.a.createElement(w.a,{controlId:"formHorizontalTrailDescription"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Description:"),m.a.createElement(T.a,{sm:7},m.a.createElement(O.a,{componentClass:"textarea",type:"text",disabled:!this.state.ownerOfTrail,value:this.state.trailDescription,onChange:function(t){return e.setState({trailDescription:t.target.value})}}))),m.a.createElement(w.a,{controlId:"formHorizontalTrailLikes"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Likes:"),m.a.createElement(T.a,{sm:7},m.a.createElement("b",null,m.a.createElement(O.a,{disabled:!0,value:this.state.trailLikes})))),m.a.createElement(w.a,{controlId:"formHorizontalTrailOwner"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Creator:"),m.a.createElement(T.a,{sm:4},m.a.createElement("b",null,m.a.createElement(O.a,{disabled:!0,value:j.a.getAppData().trailUserNickname}))),m.a.createElement(T.a,{sm:2},m.a.createElement(y.a,{bsStyle:"primary",type:"button",onClick:this.goToUser,style:{width:"93px"}},"View User"))),m.a.createElement(w.a,{controlId:"formHorizontalTrailIncidents"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Number of incidents:"),m.a.createElement(T.a,{sm:4},m.a.createElement("b",null,m.a.createElement(O.a,{disabled:!0,value:this.state.trailIncidents}))),m.a.createElement(T.a,{sm:2},m.a.createElement(y.a,{bsStyle:"warning",type:"button",style:{width:"93px"}},m.a.createElement("a",{href:"https://data.police.uk/docs/method/crimes-at-location/",target:"police"},"View Details")))),m.a.createElement(w.a,{controlId:"formHorizontalTrailSlope"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"TrailSlope:"),m.a.createElement(T.a,{sm:7},m.a.createElement("b",null,m.a.createElement(O.a,{disabled:!0,value:this.state.trailSlope})))),m.a.createElement(w.a,{controlId:"formHorizontalTrailElevation"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Maximum elevation:"),m.a.createElement(T.a,{sm:4},m.a.createElement("b",null,m.a.createElement(O.a,{disabled:!0,value:this.state.deltaElevation}))),m.a.createElement(T.a,{sm:3},m.a.createElement("b",null,m.a.createElement(O.a,{disabled:!0,value:i})))),m.a.createElement(w.a,null,m.a.createElement(T.a,{sm:4},l),m.a.createElement(T.a,{sm:4},n),m.a.createElement(T.a,{sm:4},r))))),m.a.createElement(E.a,null),m.a.createElement(C.a,{show:this.state.showPopup,onHide:this.closePopup},m.a.createElement(C.a.Header,{closeButton:!0},m.a.createElement(C.a.Title,null,"Delete")),m.a.createElement(C.a.Body,null,m.a.createElement("div",null,"Please confirm deleting trail: ",this.state.trailName)),m.a.createElement(C.a.Footer,null,m.a.createElement(y.a,{bsStyle:"danger",type:"button",onClick:this.deleteTrail},"Delete"),m.a.createElement(y.a,{bsStyle:"primary",type:"button",onClick:this.closePopup},"Cancel")))))),m.a.createElement("div",null,m.a.createElement(I.GMap,{ref:function(t){return e.gmap=t},overlays:this.state.trails,options:a,style:{width:"100%",minHeight:"320px",height:"500px"},onOverlayClick:this.onOverlayClick})),m.a.createElement(f.a,null))}}]),a}(p.Component);t.a=Object(h.a)(A)}).call(this,a(41))},122:function(e,t,a){"use strict";(function(e){var n=a(10),r=a.n(n),l=a(25),i=a(16),s=a(17),o=a(21),c=a(20),u=a(4),d=a(22),p=a(0),m=a.n(p),h=a(45),g=(a(57),a(47),a(34)),f=a(35),v=a(71),y=a(49),E=a(44),k=a(29),b=a(53),w=a(12),T=a(5),S=a(15),O=a(18),C=a(23),L=a(59),D=a(13),M=a.n(D),j=a(31),I=a(14),A=a(36),R=5,P=function(t){function a(t){var n;return Object(i.a)(this,a),(n=Object(o.a)(this,Object(c.a)(a).call(this,t))).state={lat:e.gpsLatitude,lng:e.gpsLongitude,distance:0,trails:[],isFirstPoint:!0,deviationRate:R,isRecording:!1,isSnapToRoad:!1,errorMessage:""},n.recordCurrentLocation=n.recordCurrentLocation.bind(Object(u.a)(n)),n.addPointOnTrail=n.addPointOnTrail.bind(Object(u.a)(n)),n.addTrails=n.addTrails.bind(Object(u.a)(n)),n.clearTrails=n.clearTrails.bind(Object(u.a)(n)),n.startRecording=n.startRecording.bind(Object(u.a)(n)),n.stopRecording=n.stopRecording.bind(Object(u.a)(n)),n}return Object(d.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=j.a(53.444584878055316,-2.2329281868442195,53.44657854076952,-2.2195385994418757);console.log("~~~test: "+e)}},{key:"componentWillUnmount",value:function(){void 0!==e.gpsTimer&&clearInterval(e.gpsTimer)}},{key:"startRecording",value:function(){e.gpsTimer=setInterval(this.recordCurrentLocation,5e3),console.log(this.state.deviationRate),this.setState({isRecording:!0})}},{key:"stopRecording",value:function(){this.setState({isRecording:!1}),clearInterval(e.gpsTimer)}},{key:"recordCurrentLocation",value:function(){var t=Object(l.a)(r.a.mark(function t(){var a,n,l,i,s,o,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.state.isFirstPoint&&(a=window.google,n={url:"http://maps.google.com/mapfiles/kml/paddle/go.png",scaledSize:new a.maps.Size(40,40)},l=this.state.trails,this.setState({trails:[]}),console.log("~~~coord: "+e.gpsLatitude+" "+e.gpsLongitude),i=new a.maps.Marker({position:{lat:e.gpsLatitude,lng:e.gpsLongitude},title:"Start Position",icon:n,animation:a.maps.Animation.DROP}),l.push(i),this.setState({trails:l}),this.setState({isFirstPoint:!1})),void 0===e.prevLat&&(e.prevLat=e.gpsLatitude,e.prevLng=e.gpsLongitude),s=[],o={lat:e.prevLat,lng:e.prevLng},s.push(o),t.next=7,j.b();case 7:(c=j.a(e.prevLat,e.prevLng,e.gpsLatitude,e.gpsLongitude))>0&&(e.prevLat=e.gpsLatitude,e.prevLng=e.gpsLongitude),console.log("~~~deviation: "+c),c>=this.state.deviationRate&&this.addPointOnTrail(),this.setState({lat:e.gpsLatitude,lng:e.gpsLongitude,distance:c});case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"addPointOnTrail",value:function(){var t=this.state.trails;this.setState({trails:[]});var a=window.google,n={url:"http://maps.google.com/mapfiles/kml/paddle/ylw-circle.png",scaledSize:new a.maps.Size(25,25)},r={lat:e.gpsLatitude,lng:e.gpsLongitude};e.newTrail.push(r);var l=new a.maps.Marker({position:r,title:"Custom Marker",icon:n,animation:a.maps.Animation.DROP});t.push(l);t.push(new a.maps.Polyline({path:e.newTrail,geodesic:!0,strokeColor:"#0000FF",strokeOpacity:0,icons:[{icon:{path:"M 0,-1 0,1",strokeOpacity:1,scale:4},offset:"0",repeat:"20px"}]})),this.setState({trails:t})}},{key:"addTrails",value:function(t){if(console.log("json: "+t),void 0!==e.newTrail)if(e.newTrail.length<2)this.state.errorMessage="Please activate Edit Mode and construct a trail.";else{console.log("newtrail length: "+e.newTrail.length);var a=this;M.a.post(I.c+"trail/add",t).then(function(e){console.log("API server response: "+JSON.stringify(e.data)),e.data.responseCode<0?a.setState({errorMessage:e.data.message}):(a.setState({trails:[]}),a.props.history.push("/user-details"))}).catch(function(e){console.log(e)})}}},{key:"clearTrails",value:function(){e.newTrail=[],this.loadTrails(this,e.allTrailsResponse)}},{key:"render",value:function(){var t=this;m.a.createElement("span",null);""!==this.state.errorMessage&&m.a.createElement(y.a,{bsStyle:"warning"},m.a.createElement("strong",null,this.state.errorMessage));window.google;var a={};return a=void 0!==e.gpsLatitude?{center:{lat:e.gpsLatitude,lng:e.gpsLongitude},zoom:15}:{center:{lat:53.467458,lng:-2.234257},zoom:15},e.isSnapToRoad=this.state.isSnapToRoad,m.a.createElement("div",null,m.a.createElement(E.a,null,m.a.createElement(g.a,null)),m.a.createElement("h3",null,"Recording Page"),m.a.createElement("br",null),m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(k.a,{style:{width:"400px",display:"inline-block"}},m.a.createElement(k.a.Heading,null),m.a.createElement(k.a.Body,null,m.a.createElement(b.a,{horizontal:!0},m.a.createElement(w.a,{controlId:"formHorizontalUserName"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Current lat:"),m.a.createElement(T.a,{sm:7},m.a.createElement(O.a,{type:"number",value:this.state.lat}))),m.a.createElement(w.a,{controlId:"formHorizontalNickname"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Current lng:"),m.a.createElement(T.a,{sm:7},m.a.createElement(O.a,{type:"number",value:this.state.lng}))),m.a.createElement(w.a,{controlId:"formHorizontalRegisteredDate"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Last sprint distance:"),m.a.createElement(T.a,{sm:7},m.a.createElement(O.a,{type:"number",value:this.state.distance,disabled:!0}))),m.a.createElement(w.a,{controlId:"formHorizontalRegisteredDate"},m.a.createElement(T.a,{componentClass:S.a,sm:4},"Select pace:"),m.a.createElement(T.a,{sm:4},m.a.createElement(O.a,{componentClass:"select",placeholder:"How difficult was the trail",onChange:function(e){return t.setState({deviationRate:e.target.value})}},m.a.createElement("option",{value:R},"Walking"),m.a.createElement("option",{value:9},"Running"),m.a.createElement("option",{value:12},"Cycling"))),m.a.createElement(T.a,{sm:4},m.a.createElement(L.ToggleButton,{style:{width:"120px"},onLabel:"Snap-To-Road",offLabel:"Off-road",onIcon:"pi pi-check",offIcon:"pi pi-times",checked:this.state.isSnapToRoad,onChange:function(e){return t.setState({isSnapToRoad:e.value})}}))),m.a.createElement(E.a,null,m.a.createElement(v.a,{callbackFunctionAddTrails:this.addTrails,callbackFunctionClearTrails:this.clearTrails}),m.a.createElement(C.a,{bsStyle:"success",disabled:this.state.isRecording,onClick:this.startRecording},"Start Recording"),m.a.createElement(C.a,{bsStyle:"danger",disabled:!this.state.isRecording,onClick:this.stopRecording},"Stop Recording")))))),m.a.createElement("div",{id:"map"},m.a.createElement(A.GMap,{id:"map",overlays:this.state.trails,options:a,style:{width:"100%",minHeight:"320px",height:"700px"},onMapClick:this.onMapClick,onOverlayClick:this.onOverlayClick})),m.a.createElement(f.a,null))}}]),a}(p.Component);t.a=Object(h.a)(P)}).call(this,a(41))},123:function(e,t,a){"use strict";(function(e){var n=a(10),r=a.n(n),l=a(25),i=a(16),s=a(17),o=a(21),c=a(20),u=a(4),d=a(22),p=a(0),m=a.n(p),h=a(45),g=a(49),f=a(23),v=a(44),y=a(29),E=a(53),k=a(12),b=a(5),w=a(15),T=a(18),S=a(34),O=a(35),C=a(13),L=a.n(C),D=a(14),M=a(9),j=(a(31),a(36)),I=function(t){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(c.a)(a).call(this,e))).state={errorMessage:"",nickname:"",trails:[],constructedTrail:[],totalUserLikes:0},t.getOwnerTrails=t.getOwnerTrails.bind(Object(u.a)(t)),t.loadTrails=t.loadTrails.bind(Object(u.a)(t)),t.onOverlayClick=t.onOverlayClick.bind(Object(u.a)(t)),t}return Object(d.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){M.a.isLogged?this.getOwnerTrails():this.props.history.push("/")}},{key:"getOwnerTrails",value:function(){var t=Object(l.a)(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=M.a.getAppData().trailUserId,n=this,e.allTrailsResponse={},L.a.get(D.c+"trail/user-trails?userId="+a).then(function(t){console.log("API server response Trail Owner Trails: "+JSON.stringify(t.data)),t.data.responseCode<0?n.setState({errorMessage:t.data.message}):(e.allTrailsResponse=t,n.loadTrails(n,t))}).catch(function(e){console.log(e)});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"loadTrails",value:function(e,t){console.log("loadTrails "+JSON.stringify(t)),this.setState({trails:[]});for(var a=window.google,n={url:"http://maps.google.com/mapfiles/kml/paddle/go.png",scaledSize:new a.maps.Size(40,40)},r={url:"http://maps.google.com/mapfiles/kml/paddle/red-circle.png",scaledSize:new a.maps.Size(40,40)},l=[],i="",s="",o="",c="",u=0,d="",p=[],m=0;m<t.data.length;m++){l=t.data[m].coordinates,i=t.data[m].trailName,o=t.data[m].trailLength,s=t.data[m].trailDifficulty,c=t.data[m].trailType,d=t.data[m].trailId,u=e.state.totalUserLikes,u+=t.data[m].trailNoOfLikes,e.setState({totalUserLikes:u}),p.push(new a.maps.Polyline({path:l,geodesic:!0,strokeColor:"#0000FF",strokeOpacity:.5,strokeWeight:5}));var h=new a.maps.Marker({position:l[0],title:"Start Trail, "+i+", "+s+", "+o+", "+c+", "+d,icon:n});p.push(h);var g=new a.maps.Marker({position:l[l.length-1],title:"End Trail, "+i+", "+s+", "+o+", "+c+", "+d,icon:r});p.push(g)}e.setState({trails:p})}},{key:"onOverlayClick",value:function(e){var t=window.google;if(void 0!==e.overlay.getTitle){var a=e.overlay.getTitle().split(","),n=a[5].trim();console.log("#trailId: #"+n+"#"),this.infoWindow=this.infoWindow||new t.maps.InfoWindow,this.infoWindow.setContent("<div><h5>"+a[1]+"</h5><h6> Location: "+a[0]+"</h6><h6> Difficulty: "+a[2]+"</h6><h6> Length: "+a[3]+" m</h6><h6> Type: "+a[4]+'</h6><button onClick={this.test}><a href="./?trailId='+n+'">View Trail</a></button></div>'),this.infoWindow.open(e.map,e.overlay),e.map.setCenter(e.overlay.getPosition())}}},{key:"render",value:function(){var e=m.a.createElement("span",null);""!==this.state.errorMessage&&(e=m.a.createElement(g.a,{bsStyle:"warning"},m.a.createElement("strong",null,this.state.errorMessage)));window.google,m.a.createElement("span",null);m.a.createElement(f.a,{bsStyle:"success",type:"button",onClick:this.updateUser},"Update");M.a.getAppData();var t=M.a.getAppData().trailUserNickname;return m.a.createElement("div",null,m.a.createElement(v.a,null,m.a.createElement(S.a,null)),m.a.createElement("h3",null," User ",t,"'s Overview Page "),m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(y.a,{style:{width:"400px",display:"inline-block"}},m.a.createElement(y.a.Heading,null,e),m.a.createElement(y.a.Body,null,m.a.createElement(E.a,{horizontal:!0},m.a.createElement(k.a,{controlId:"formHorizontalNickname"},m.a.createElement(b.a,{componentClass:w.a,sm:4},"Nickname:"),m.a.createElement(b.a,{sm:7},m.a.createElement(T.a,{type:"text",value:t,disabled:!0}))),m.a.createElement(k.a,{controlId:"formHorizontalTotalLikes"},m.a.createElement(b.a,{componentClass:w.a,sm:4},"Total trail likes received:"),m.a.createElement(b.a,{sm:7},m.a.createElement(T.a,{type:"number",value:this.state.totalUserLikes,disabled:!0}))))))),m.a.createElement("hr",null),m.a.createElement("h3",null," ",t,"'s own trails: "),m.a.createElement("div",{id:"map"},m.a.createElement(j.GMap,{id:"map",overlays:this.state.trails,options:{center:{lat:53.467458,lng:-2.234257},zoom:15},style:{width:"100%",minHeight:"320px",height:"700px"},onMapClick:this.onMapClick,onOverlayClick:this.onOverlayClick})),m.a.createElement(O.a,null))}}]),a}(p.Component);t.a=Object(h.a)(I)}).call(this,a(41))},125:function(e,t,a){e.exports=a(233)},130:function(e,t,a){},131:function(e,t,a){},14:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"a",function(){return r}),a.d(t,"b",function(){return l});var n="https://sa306.saturn.fastwebserver.de:9093/api-server/",r="0.6",l=18e5},233:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(32),i=a.n(l),s=(a(130),a(16)),o=a(17),c=a(21),u=a(20),d=a(22),p=(a(131),a(132),a(133),a(134),a(135),a(136),a(137),a(239)),m=a(237),h=a(238),g=a(112),f=a(118),v=a(120),y=a(121),E=a(122),k=a(31),b=a(123),w=function(e){function t(e){var a;return Object(s.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e)),console.log("App start ..."),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){k.b()}},{key:"myRouterSwitch",value:function(){return r.a.createElement(p.a,null,r.a.createElement(m.a,{exact:!0,path:"/",component:g.a}),r.a.createElement(m.a,{path:"/home",component:f.a}),r.a.createElement(m.a,{path:"/user-details",component:v.a}),r.a.createElement(m.a,{path:"/recording",component:E.a}),r.a.createElement(m.a,{path:"/trail-details/:id",component:y.a}),r.a.createElement(m.a,{path:"/view-user",component:b.a}))}},{key:"render",value:function(){var e=this.myRouterSwitch();return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,null,e),"}")}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},31:function(e,t,a){"use strict";(function(e){a.d(t,"b",function(){return d}),a.d(t,"a",function(){return m}),a.d(t,"d",function(){return h}),a.d(t,"e",function(){return g}),a.d(t,"c",function(){return f});var n=a(10),r=a.n(n),l=a(25),i=a(9),s=a(13),o=a.n(s);function c(t){console.log("~~~ init App current position: "+t.coords.latitude+", "+t.coords.longitude),e.gpsLatitude=t.coords.latitude,e.gpsLongitude=t.coords.longitude;var a=i.a.getAppData();a.currentCoord.lat=e.gpsLatitude,a.currentCoord.lng=e.gpsLongitude,i.a.setAppData(a)}function u(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))}function d(){navigator.geolocation?navigator.geolocation.getCurrentPosition(c,u,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):console.log("Browser doesn't support Geolocation!")}function p(e){return e*Math.PI/180}function m(e,t,a,n){console.log("distanceBetweenCoordinates: "+e+", "+t+" and "+a+", "+n);var r=p(a-e),l=p(n-t);e=p(e),a=p(a);var i=Math.sin(r/2)*Math.sin(r/2)+Math.sin(l/2)*Math.sin(l/2)*Math.cos(e)*Math.cos(a);return 6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}function h(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function g(e){return/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/.test(e)}function f(e){return v.apply(this,arguments)}function v(){return(v=Object(l.a)(r.a.mark(function t(a){var n,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(window.google,n="",l=0;l<a.length;l++)n+=a[l].lat+","+a[l].lng+"|";return n=n.substring(0,n.length-1),n+="&interpolate=true&key=AIzaSyCdfU7kT27TmWiEAYDmalLIcebbeBe5M_E",t.t0=o.a.get("https://roads.googleapis.com/v1/snapToRoads?path="+n),t.next=8,function(t){var a;e.newTrailSnapToRoad=[];for(var n=0;n<t.data.snappedPoints.length;n++)a={lat:t.data.snappedPoints[n].location.latitude,lng:t.data.snappedPoints[n].location.longitude},e.newTrailSnapToRoad.push(a)};case 8:return t.t1=t.sent,t.t2=function(e){console.log(e)},t.next=12,t.t0.then.call(t.t0,t.t1).catch(t.t2);case 12:case"end":return t.stop()}},t)}))).apply(this,arguments)}}).call(this,a(41))},34:function(e,t,a){"use strict";var n=a(10),r=a.n(n),l=a(25),i=a(16),s=a(17),o=a(21),c=a(20),u=a(4),d=a(22),p=a(0),m=a.n(p),h=a(23),g=a(234),f=a(26),v=a(45),y=a(57),E=a(47),k=a(9),b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={showPopup:!1},a.openHome=a.openHome.bind(Object(u.a)(a)),a.openUserDetails=a.openUserDetails.bind(Object(u.a)(a)),a.doLogout=a.doLogout.bind(Object(u.a)(a)),a.openPopup=a.openPopup.bind(Object(u.a)(a)),a.closePopup=a.closePopup.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"openHome",value:function(){k.a.isLogged?this.props.history.push("/home"):this.props.history.push("/")}},{key:"openUserDetails",value:function(){this.props.history.push("/user-details")}},{key:"doLogout",value:function(){var e=Object(l.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:({ACCESS_TOKEN:k.a.getUserData().ACCESS_TOKEN}),k.a.doLogout(),this.props.history.push("/"),this.closePopup();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"openPopup",value:function(){this.setState({showPopup:!0})}},{key:"closePopup",value:function(){this.setState({showPopup:!1})}},{key:"render",value:function(){var e;return e=k.a.isLogged?m.a.createElement("div",null,m.a.createElement("div",null,m.a.createElement(h.a,{bsStyle:"default",onClick:this.openUserDetails},"User Details"))," ",m.a.createElement("div",{style:{float:"right",backgroundColor:"black"}},m.a.createElement(h.a,{bsStyle:"warning",onClick:this.openPopup}," Logout "))):m.a.createElement("div",null,m.a.createElement("div",{style:{float:"right",backgroundColor:"black"}},m.a.createElement(y.a,null)),m.a.createElement("div",{style:{float:"right",backgroundColor:"black"}},m.a.createElement(E.a,null))),m.a.createElement("div",{style:{paddingLeft:"10px",backgroundColor:"black"}},m.a.createElement(g.a,{style:{color:"red"},bsStyle:"pills",onSelect:this.handleSelect},m.a.createElement(h.a,{bsStyle:"info",onClick:this.openHome},"Home"),e),m.a.createElement(f.a,{show:this.state.showPopup,onHide:this.closePopup},m.a.createElement(f.a.Header,{closeButton:!0},m.a.createElement(f.a.Title,null,"Logout")),m.a.createElement(f.a.Body,null,"Please confirm logout."),m.a.createElement(f.a.Footer,null,m.a.createElement(h.a,{bsStyle:"warning",type:"button",onClick:this.doLogout},"Logout"),m.a.createElement(h.a,{onClick:this.closePopup},"Cancel"))))}}]),t}(p.Component);t.a=Object(v.a)(b)},35:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l={backgroundColor:"#000000",borderTop:"1px solid #E7E7E7",textAlign:"center",padding:"20px",position:"fixed",left:"0",bottom:"0",height:"60px",width:"100%",color:"white"},i={display:"block",padding:"20px",height:"60px",width:"100%"};t.a=function(e){var t=e.children;return r.a.createElement("div",null,r.a.createElement("div",{style:i}),r.a.createElement("div",{style:l},t,"Trail Running Webapp by Stefan Pristoleanu"))}},47:function(e,t,a){"use strict";var n=a(10),r=a.n(n),l=a(25),i=a(16),s=a(17),o=a(21),c=a(20),u=a(4),d=a(22),p=a(0),m=a.n(p),h=a(45),g=a(49),f=a(23),v=a(26),y=a(53),E=a(12),k=a(5),b=a(15),w=a(18),T=a(13),S=a.n(T),O=a(14),C=a(9),L=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={showLogin:!1,email:"",password:"",errorMessage:""},a.openLogin=a.openLogin.bind(Object(u.a)(a)),a.closeLogin=a.closeLogin.bind(Object(u.a)(a)),a.doLogin=a.doLogin.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"openLogin",value:function(){this.setState({showLogin:!0})}},{key:"closeLogin",value:function(){this.setState({showLogin:!1,errorMessage:""})}},{key:"doLogin",value:function(){var e=Object(l.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({errorMessage:""}),""!==this.state.email.trim()){e.next=4;break}return this.setState({errorMessage:"Email is required!"}),e.abrupt("return");case 4:if(""!==this.state.password.trim()){e.next=7;break}return this.setState({errorMessage:"Password is required!"}),e.abrupt("return");case 7:return t={username:this.state.email,password:this.state.password,appVersion:O.a},a=this,e.next=11,S.a.post(O.c+"user/login",t).then(function(e){if(console.log("API server response: "+JSON.stringify(e.data)),e.data.responseCode<0)a.setState({errorMessage:e.data.message});else{var t=e.headers.authorization;S.a.defaults.headers.common.Authorization=t,C.a.setUserData(e.data),C.a.setUserAuth(t),a.closeLogin(),a.props.history.push("/home")}}).catch(function(e){console.log(e)});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=m.a.createElement("span",null);return""!==this.state.errorMessage&&(t=m.a.createElement(g.a,{bsStyle:"warning"},m.a.createElement("strong",null,this.state.errorMessage))),m.a.createElement("div",{style:{paddingLeft:"10px"}},m.a.createElement(f.a,{bsStyle:"primary",active:!0,onClick:this.openLogin},"Login"),m.a.createElement(v.a,{show:this.state.showLogin,onHide:this.closeLogin},m.a.createElement(v.a.Header,{closeButton:!0},m.a.createElement(v.a.Title,null,"Login")),m.a.createElement(v.a.Body,null,t,m.a.createElement(y.a,{horizontal:!0},m.a.createElement(E.a,{controlId:"formHorizontalEmail"},m.a.createElement(k.a,{componentClass:b.a,sm:2},"Email:"),m.a.createElement(k.a,{sm:10},m.a.createElement(w.a,{type:"email",placeholder:"Email",onChange:function(t){return e.setState({email:t.target.value})}}))),m.a.createElement(E.a,{controlId:"formHorizontalPassword"},m.a.createElement(k.a,{componentClass:b.a,sm:2},"Password:"),m.a.createElement(k.a,{sm:10},m.a.createElement(w.a,{type:"password",placeholder:"Password",onChange:function(t){return e.setState({password:t.target.value})}}))),m.a.createElement(E.a,null,m.a.createElement(k.a,{smOffset:2,sm:10},m.a.createElement(f.a,{bsStyle:"primary",type:"button",onClick:this.doLogin},"Login"))))),m.a.createElement(v.a.Footer,null,m.a.createElement(f.a,{onClick:this.closeLogin},"Close"))))}}]),t}(p.Component);t.a=Object(h.a)(L)},57:function(e,t,a){"use strict";var n=a(10),r=a.n(n),l=a(25),i=a(16),s=a(17),o=a(21),c=a(20),u=a(4),d=a(22),p=a(0),m=a.n(p),h=a(45),g=a(49),f=a(23),v=a(26),y=a(53),E=a(12),k=a(5),b=a(15),w=a(18),T=a(236),S=a(13),O=a.n(S),C=a(14),L=a(9),D=a(31),M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={showDialog:!1,email:"",password:"",errorCode:""},a.clickLink=a.clickLink.bind(Object(u.a)(a)),a.closeDialog=a.closeDialog.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"clickLink",value:function(){this.setState({showDialog:!0})}},{key:"closeDialog",value:function(){this.setState({showDialog:!1,errorCode:""})}},{key:"render",value:function(){var e=m.a.createElement("div",null);return"errorLogin"===this.state.errorCode?e=m.a.createElement(g.a,{bsStyle:"warning"},m.a.createElement("strong",null,"Incorrect username / password!")):"errorRegister"===this.state.errorCode?e=m.a.createElement(g.a,{bsStyle:"warning"},m.a.createElement("strong",null,"Incorrect username / passwords not matching!")):"errorVerification"===this.state.errorCode&&(e=m.a.createElement(g.a,{bsStyle:"warning"},m.a.createElement("strong",null,"Incorrect code!"))),m.a.createElement("div",{style:{paddingLeft:"10px"}},m.a.createElement(f.a,{bsStyle:"link",onClick:this.clickLink,href:"#"},"Agree to terms and conditions"),m.a.createElement(v.a,{show:this.state.showDialog,onHide:this.closeDialog},m.a.createElement(v.a.Header,{closeButton:!0},m.a.createElement(v.a.Title,null,"General Data Protection Regulations")),m.a.createElement(v.a.Body,null,e,m.a.createElement(y.a,{horizontal:!0},m.a.createElement("div",null,"This website follows the standard University of Manchester personal data policy.",m.a.createElement("br",null),"The register data is safely kept in a server-based database, and only used for authentication. One can withdraw from the website by contacting administration.",m.a.createElement("br",null),m.a.createElement(f.a,{bsStyle:"link",href:"https://www.eugdpr.org/"},"Read more about GDPR here")))),m.a.createElement(v.a.Footer,null,m.a.createElement(f.a,{onClick:this.closeDialog},"Close"))))}}]),t}(p.Component),j=Object(h.a)(M),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={showLogin:!1,email:"",password:"",password2:"",nickname:"",errorMessage:"",checkInput:!1},a.openRegister=a.openRegister.bind(Object(u.a)(a)),a.closeRegister=a.closeRegister.bind(Object(u.a)(a)),a.doRegister=a.doRegister.bind(Object(u.a)(a)),a.changeCheck=a.changeCheck.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"openRegister",value:function(){this.setState({showRegister:!0})}},{key:"closeRegister",value:function(){this.setState({showRegister:!1,errorMessage:""})}},{key:"doRegister",value:function(){var e=Object(l.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({errorMessage:""}),!1!==this.state.checkInput){e.next=4;break}return this.setState({errorMessage:"Please agree to the GDPR by ticking the box."}),e.abrupt("return");case 4:if(""!==this.state.email.trim()&&D.d(this.state.email)){e.next=7;break}return this.setState({errorMessage:"Email format is required!"}),e.abrupt("return");case 7:if(""!==this.state.password.trim()){e.next=10;break}return this.setState({errorMessage:"Password is required!"}),e.abrupt("return");case 10:if(D.e(this.state.password.trim())){e.next=13;break}return this.setState({errorMessage:"Password must be 7 to 15 characters which contain only characters, numeric digits, underscore and first character must be a letter."}),e.abrupt("return");case 13:if(this.state.password==this.state.password2){e.next=16;break}return this.setState({errorMessage:"The passwords do not match!"}),e.abrupt("return");case 16:return t={username:this.state.email,password:this.state.password,nickname:this.state.nickname,appVersion:C.a},a=this,e.next=20,O.a.post(C.c+"user/register",t).then(function(e){console.log("login response: "+JSON.stringify(e.data)),e.data.responseCode<0?a.setState({errorMessage:e.data.message}):(L.a.setUserData(e.data),a.closeRegister())}).catch(function(e){console.log(e)});case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"changeCheck",value:function(){!0===this.state.checkInput?this.setState({checkInput:!1}):this.setState({checkInput:!0})}},{key:"render",value:function(){var e=this,t=m.a.createElement("span",null);return""!==this.state.errorMessage&&(t=m.a.createElement(g.a,{bsStyle:"warning"},m.a.createElement("strong",null,this.state.errorMessage))),m.a.createElement("div",{style:{paddingLeft:"10px"}},m.a.createElement(f.a,{bsStyle:"success",active:!0,onClick:this.openRegister},"Register"),m.a.createElement(v.a,{show:this.state.showRegister,onHide:this.closeRegister},m.a.createElement(v.a.Header,{closeButton:!0},m.a.createElement(v.a.Title,null,"Register")),m.a.createElement(v.a.Body,null,t,m.a.createElement(y.a,{horizontal:!0},m.a.createElement(E.a,{controlId:"formHorizontalEmail"},m.a.createElement(k.a,{componentClass:b.a,sm:4},"Email:"),m.a.createElement(k.a,{sm:7},m.a.createElement(w.a,{type:"email",placeholder:"Email",onChange:function(t){return e.setState({email:t.target.value})}}))),m.a.createElement(E.a,{controlId:"formHorizontalPassword"},m.a.createElement(k.a,{componentClass:b.a,sm:4},"Password:"),m.a.createElement(k.a,{sm:7},m.a.createElement(w.a,{type:"password",placeholder:"Password",onChange:function(t){return e.setState({password:t.target.value})}}))),m.a.createElement(E.a,{controlId:"formHorizontalPassword2"},m.a.createElement(k.a,{componentClass:b.a,sm:4},"Re-type Password:"),m.a.createElement(k.a,{sm:7},m.a.createElement(w.a,{type:"password",placeholder:"Re-type password",onChange:function(t){return e.setState({password2:t.target.value})}}))),m.a.createElement(E.a,{controlId:"formHorizontalNickname"},m.a.createElement(k.a,{componentClass:b.a,sm:4},"Nickname:"),m.a.createElement(k.a,{sm:7},m.a.createElement(w.a,{type:"text",placeholder:"Set a nickname",onChange:function(t){return e.setState({nickname:t.target.value})}}))),m.a.createElement(E.a,{controlId:"formCheckbox"},m.a.createElement(k.a,{componentClass:b.a,sm:2},m.a.createElement(j,null)),m.a.createElement(k.a,{sm:10},m.a.createElement(T.a,{style:{paddingLeft:"150px"},inline:!0,onClick:this.changeCheck}))),m.a.createElement(E.a,null,m.a.createElement(k.a,{smOffset:4,sm:7},m.a.createElement(f.a,{bsStyle:"primary",type:"button",onClick:this.doRegister},"Register"))))),m.a.createElement(v.a.Footer,null,m.a.createElement(f.a,{onClick:this.closeRegister},"Close"))))}}]),t}(p.Component);t.a=Object(h.a)(I)},71:function(e,t,a){"use strict";(function(e){var n=a(10),r=a.n(n),l=a(25),i=a(16),s=a(17),o=a(21),c=a(20),u=a(4),d=a(22),p=a(0),m=a.n(p),h=a(45),g=a(49),f=a(23),v=a(26),y=a(53),E=a(12),k=a(5),b=a(15),w=a(18),T=(a(13),a(14),a(9),a(31)),S=(a(47),function(t){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(c.a)(a).call(this,e))).state={showLogin:!1,trailName:"",trailDifficulty:"",trailLength:0,trailType:"",trailDescription:"",trailLikes:0,errorMessage:"",deltaElevation:0,trailSlope:0},t.openDialog=t.openDialog.bind(Object(u.a)(t)),t.closeDialog=t.closeDialog.bind(Object(u.a)(t)),t.composeAddTrailJSON=t.composeAddTrailJSON.bind(Object(u.a)(t)),t}return Object(d.a)(a,t),Object(s.a)(a,[{key:"openDialog",value:function(){var t=window.google,a=new t.maps.Polyline({path:e.newTrail,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:5}),n=t.maps.geometry.spherical.computeLength(a.getPath());this.setState({trailLength:Math.round(n),showRegister:!0})}},{key:"closeDialog",value:function(){this.setState({showRegister:!1,errorMessage:""})}},{key:"composeAddTrailJSON",value:function(){if(e.newTrail.length<2)return this.state.errorMessage="Please activate Edit Mode and construct a trail.",void this.closeDialog();var t=window.google,a=new t.maps.Polyline({path:e.newTrail,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:5}),n=t.maps.geometry.spherical.computeLength(a.getPath());console.log("global.newTrail:"+JSON.stringify(e.newTrail));for(var i=new t.maps.ElevationService,s=[],o=0;o<e.newTrail.length;o++)s[o]=e.newTrail[o];console.log("~~~~path: "+s);var c=this;i.getElevationAlongPath({path:s,samples:256},function(){var t=Object(l.a)(r.a.mark(function t(a,l){var i,s,o,u,d,p;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=0,s=0,t.prev=2,"OK"===l){for(console.log("The elevation at this point <br>is "+JSON.stringify(a)+" meters."),o=0,u=1e4,d=0;d<a.length;d++)a[d].elevation>o&&(o=a[d].elevation),a[d].elevation<u&&(u=a[d].elevation);i=o-u,s=a[a.length-1].elevation-a[0].elevation,console.log("MIN point: "+u+" and MAX point: "+o+"\nSTART: "+a[0].elevation+" and END: "+a[a.length-1].elevation)}case 4:if(t.prev=4,console.log("old path: "+JSON.stringify(e.newTrail)),!e.isSnapToRoad){t.next=12;break}return t.next=9,T.c(e.newTrail);case 9:p={coordinates:e.newTrailSnapToRoad,trailName:c.state.trailName,trailDifficulty:c.state.trailDifficulty,trailLength:n,trailType:c.state.trailType,trailDescription:c.state.trailDescription,deltaElevation:i,trailSlope:s},t.next=13;break;case 12:p={coordinates:e.newTrail,trailName:c.state.trailName,trailDifficulty:c.state.trailDifficulty,trailLength:n,trailType:c.state.trailType,trailDescription:c.state.trailDescription,deltaElevation:i,trailSlope:s};case 13:return console.log(JSON.stringify(p)),c.closeDialog(),c.props.callbackFunctionAddTrails(p),t.finish(4);case 17:case"end":return t.stop()}},t,null,[[2,,4,17]])}));return function(e,a){return t.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this,t=m.a.createElement("span",null);return""!==this.state.errorMessage&&(t=m.a.createElement(g.a,{bsStyle:"warning"},m.a.createElement("strong",null,this.state.errorMessage))),m.a.createElement("div",{style:{paddingLeft:"10px"}},m.a.createElement(f.a,{bsStyle:"primary",active:!0,onClick:this.openDialog},"Add Trail"),m.a.createElement(v.a,{show:this.state.showRegister,onHide:this.closeDialog},m.a.createElement(v.a.Header,{closeButton:!0},m.a.createElement(v.a.Title,null,"Add Trail")),m.a.createElement(v.a.Body,null,t,m.a.createElement(y.a,{horizontal:!0},m.a.createElement(E.a,{controlId:"formHorizontalTrailName"},m.a.createElement(k.a,{componentClass:b.a,sm:4},"Trail Name:"),m.a.createElement(k.a,{sm:7},m.a.createElement(w.a,{type:"text",placeholder:"Set a name",onChange:function(t){return e.setState({trailName:t.target.value})}}))),m.a.createElement(E.a,{controlId:"formHorizontalTrailDifficulty"},m.a.createElement(k.a,{componentClass:b.a,sm:4},"Difficulty:"),m.a.createElement(k.a,{sm:7},m.a.createElement(w.a,{componentClass:"select",placeholder:"How difficult was the trail",onChange:function(t){return e.setState({trailDifficulty:t.target.value})}},m.a.createElement("option",{value:"1"},"Easy"),m.a.createElement("option",{value:"2"},"Moderate"),m.a.createElement("option",{value:"3"},"Difficult")))),m.a.createElement(E.a,{controlId:"formHorizontalTrailLength"},m.a.createElement(k.a,{componentClass:b.a,sm:4},"Computed Trail Length:"),m.a.createElement(k.a,{sm:7},m.a.createElement("b",null,this.state.trailLength," meters"))),m.a.createElement(E.a,{controlId:"formHorizontalTrailType"},m.a.createElement(k.a,{componentClass:b.a,sm:4},"Trail Type:"),m.a.createElement(k.a,{sm:7},m.a.createElement(w.a,{componentClass:"select",placeholder:"Select",onChange:function(t){return e.setState({trailType:t.target.value})}},m.a.createElement("option",{value:"walking"},"Walking"),m.a.createElement("option",{value:"running"},"Running"),m.a.createElement("option",{value:"cycling"},"Cycling")))),m.a.createElement(E.a,{controlId:"formHorizontalTrailDescription"},m.a.createElement(k.a,{componentClass:b.a,sm:4},"Description:"),m.a.createElement(k.a,{sm:7},m.a.createElement(w.a,{componentClass:"textarea",type:"text",placeholder:"Optional",onChange:function(t){return e.setState({trailDescription:t.target.value})}}))),m.a.createElement(E.a,null,m.a.createElement(k.a,{smOffset:4,sm:7},m.a.createElement(f.a,{bsStyle:"success",type:"button",onClick:this.composeAddTrailJSON},"Add"),m.a.createElement(f.a,{active:!0,onClick:this.props.callbackFunctionClearTrails},"Clear Trail")),m.a.createElement("div",{id:"elevation_chart"})))),m.a.createElement(v.a.Footer,null,m.a.createElement(f.a,{onClick:this.closeDialog},"Close"))))}}]),a}(p.Component));t.a=Object(h.a)(S)}).call(this,a(41))},9:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return o});var n=a(16),r=a(17),l=a(14),i=a(13),s=a.n(i),o=new(function(){function t(){Object(n.a)(this,t),console.log("Create User model class"),this.userData={},this.userAuth={},this.appData={allTrails:[],trailUserId:0,trailUserNickname:"",currentCoord:{lat:0,lng:0}},this.isLogged=!1,this.cTagId=0,this.loadFromLocalStorage()}return Object(r.a)(t,[{key:"loadFromLocalStorage",value:function(){(null!=localStorage.getItem("trail.appData")&&(this.appData=JSON.parse(localStorage.getItem("trail.appData")),e.gpsLatitude=this.appData.currentCoord.lat,e.gpsLongitude=this.appData.currentCoord.lng),null!=localStorage.getItem("trail.userData"))&&(this.userData=JSON.parse(localStorage.getItem("trail.userData")),console.log("OK loaded userData from localStorage"),null!=localStorage.getItem("trail.userAuth")&&(this.userAuth=JSON.parse(localStorage.getItem("trail.userAuth")),Date.now()-new Date(this.userAuth.jsLastAccessDate).getTime()<l.b&&(this.isLogged=!0,s.a.defaults.headers.common.Authorization=this.userAuth.authorization)))}},{key:"getUserData",value:function(){return this.userData}},{key:"setUserData",value:function(e){this.userData=e,localStorage.setItem("trail.userData",JSON.stringify(this.userData))}},{key:"setUserAuth",value:function(e){void 0===this.userAuth&&(this.userAuth={}),this.userAuth.authorization=e,this.userAuth.jsLastAccessDate=Date.now(),this.isLogged=!0,localStorage.setItem("trail.userAuth",JSON.stringify(this.userAuth))}},{key:"setAppData",value:function(e){this.appData=e,localStorage.setItem("trail.appData",JSON.stringify(this.appData))}},{key:"getAppData",value:function(){return this.appData}},{key:"getCTagId",value:function(){return this.cTagId}},{key:"setCTagId",value:function(e){this.cTagId=e}},{key:"doLogout",value:function(){this.isLogged=!1,this.userData={},this.userAuth={},localStorage.removeItem("trail.userAuth"),localStorage.removeItem("trail.userData")}},{key:"isLogged",value:function(){return this.isLogged}}]),t}())}).call(this,a(41))}},[[125,1,2]]]);
//# sourceMappingURL=main.6490818c.chunk.js.map